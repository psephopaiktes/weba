{"version":3,"sources":["../../src/scripts/main.js"],"names":["console","log","elm","document","getElementById","window","addEventListener","pageYOffset","classList","add","remove","cosParameter","scrollY","scrollCount","oldTimestamp","performance","now","step","newTimestamp","Math","PI","scrollTo","round","cos","requestAnimationFrame","menu","button","box","getElementsByClassName","search","mask","viewFlag","toggleMenu","target","hide","contains","style","setProperty","display","scrollHeight","setTimeout","querySelector","focus","hideAll","innerWidth","event","keyCode","open","value","location","href","setAttribute"],"mappings":"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","file":"main.js","sourcesContent":["console.log('© hirata 2018');\n\n\n///////////////////////////////////////////////\n// go top\n///////////////////////////////////////////////\n! function(){\n\n    var elm = document.getElementById('gotop');\n\n    window.addEventListener('scroll', function(){\n        if( window.pageYOffset > 200 ) elm.classList.add('show');\n        else elm.classList.remove('show');\n    }, false);\n\n    elm.addEventListener('click', function(){\n\n        var cosParameter = window.scrollY / 2,\n            scrollCount = 0,\n            oldTimestamp = performance.now();\n\n        function step (newTimestamp) {\n            scrollCount += Math.PI / ( 600 / (newTimestamp - oldTimestamp));\n            if (scrollCount >= Math.PI) window.scrollTo(0, 0);\n            if (window.scrollY === 0) return;\n            window.scrollTo(0, Math.round(cosParameter + cosParameter * Math.cos(scrollCount)));\n            oldTimestamp = newTimestamp;\n            window.requestAnimationFrame(step);\n        }\n        window.requestAnimationFrame(step);\n\n    }, false);\n\n}();\n\n\n\n///////////////////////////////////////////////\n// toggle menu\n///////////////////////////////////////////////\n! function(){\n\n    var menu = {\n        button : document.getElementById('menuButton'),\n        box : document.getElementsByClassName('menu')[0]\n    };\n    var search = {\n        button : document.getElementById('searchButton'),\n        box : document.getElementsByClassName('search')[0]\n    };\n    var mask = document.getElementById('mask');\n    var viewFlag = 0;\n\n    // target を展開して、hideを隠す関数\n    function toggleMenu( target, hide ){\n\n        if( target.button.classList.contains('on') ){\n            target.button.classList.remove('on');\n            target.box.style.setProperty('--height',0);\n            mask.style.display = 'none';\n            viewFlag = 0;\n        }else{\n            target.button.classList.add('on');\n            hide.button.classList.remove('on');\n            hide.box.style.setProperty('--height',0);\n            target.box.style.setProperty('--height',target.box.scrollHeight+'px');\n            mask.style.display = 'block';\n            viewFlag = 1;\n        }\n\n        return;\n\n    }\n\n    menu.button.addEventListener( 'click', function(){\n        toggleMenu( menu, search );\n    }, false );\n\n    search.button.addEventListener( 'click', function(){\n        toggleMenu( search, menu );\n        setTimeout( function(){\n            search.box.querySelector('input').focus();\n        }, 300 );\n    }, false );\n\n    // 展開したメニューを全て隠す\n    function hideAll() {\n        if( !viewFlag ) return;\n        menu.button.classList.remove('on');\n        search.button.classList.remove('on');\n        menu.box.style.setProperty('--height',0);\n        search.box.style.setProperty('--height',0);\n        mask.style.display = 'none';\n        return;\n    }\n    mask.addEventListener('click', hideAll, false );\n    window.addEventListener('scroll', hideAll, false );\n\n    // 隠れたメニューがPC幅になったときに消えたままなのを防ぐ\n    window.addEventListener('resize', function(){\n        if( window.innerWidth >= 1280 ){\n            menu.box.style.setProperty('--height',0);\n            search.box.style.setProperty('--height',0);\n        }\n    }, false );\n\n}();\n\n\n\n///////////////////////////////////////////////\n// search\n///////////////////////////////////////////////\n! function(){\n\n    var elm = document.getElementById('search__box');\n\n    elm.addEventListener('keydown', function(){\n        if(window.event.keyCode==13)\n            window.open('https://www.google.co.jp/search?q=site:hirata.blog+' + elm.value );\n    }, false);\n\n}();\n\n\n\n///////////////////////////////////////////////\n// pager\n///////////////////////////////////////////////\n! function(){\n\n    var elm = document.getElementById('pager__select');\n\n    if(!elm) return false;\n\n    elm.addEventListener('change', function(){\n        location.href = this.value;\n    }, false);\n\n}();\n\n\n\n///////////////////////////////////////////////\n// scroll reveal GH PAGESだと挙動が安定しないので、いったんOFF\n///////////////////////////////////////////////\n// ! function(){\n//\n//     var elm = document.querySelectorAll('#posts li');\n//\n//     // 画面内の要素をhide\n//\n//     // すでに画面内にある要素を表示\n//     [].forEach.call( elm, function(elm){\n//\n//         var elmTop = elm.getBoundingClientRect().top + document.body.scrollTop;\n//\n//         if ( window.pageYOffset > elmTop - window.outerHeight*3/4 ){\n//             elm.style.opacity = 1;\n//             elm.style.transform = 'translateY(0)';\n//         }\n//\n//     });\n//\n//     // スクロールして画面内に入った要素を表示\n//     window.addEventListener('scroll', function(){\n//\n//         [].forEach.call( elm, function(elm){\n//\n//             var elmTop = elm.getBoundingClientRect().top + document.body.scrollTop;\n//\n//             if ( window.pageYOffset > elmTop - window.outerHeight*3/4 )\n//                 elm.classList.add('inview');\n//\n//         });\n//\n//     }, false);\n//\n// }();\n\n\n\n///////////////////////////////////////////////\n// fix viewport more than 1920px width\n///////////////////////////////////////////////\n! function(){\n\n    var elm = document.querySelector('meta[name=viewport]');\n\n    if( window.innerWidth > 1920 )\n        elm.setAttribute('content','width=1920');\n\n}();\n"]}